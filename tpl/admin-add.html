{% extends "base.html" %}

{% block title %}Add new {{ entity|title }}{% endblock %}
{% block content %}

<form action="{{ action|raw }}" method="POST">
{% for property in properties %}
{% if property is iterable %}
{% for key, value in property %}
<label for="{{entity|lower}}_{{ key }}_id">{{ key|title }}</label>
{% if key == parent_entity %}
<input type="hidden" name="{{entity|lower}}_{{ key }}_id" value="{{ parent_id }}" />
{% endif %}
<select name="{{entity|lower}}_{{ key }}_id"{% if key == parent_entity %} disabled="disabled"{% endif %}>
{% for subentity in value %}
<option value="{{ subentity.id }}" {% if subentity.id == parent_id %}selected="selected"{% endif %}>{{ subentity.description }}</option>
{% endfor %}
</select>
{% endfor %}
{% else %}
<label for="{{entity|lower}}_{{ property }}">{{ property }}</label> <input name="{{entity|lower}}_{{ property }}" {% if property == 'id' %}disabled="disabled"{% endif %} />
{% endif %}
<br />
{% endfor %}
<input type="hidden" name="entity" value="{{ entity|lower }}" />
{% if parent_entity is not empty %}<input type="hidden" name="parent_entity" value="{{ parent_entity|lower }}" />{% endif %}
{% if parent_id is not empty %}<input type="hidden" name="parent_id" value="{{ parent_id }}" />{% endif %}

<input name="submitted" type="submit" value="Create this {{ entity }}"/>

<!-- <p><a class="button" href="#">Create this {{ entity }}</a></p>-->
<p><a class="button" href="{{ returnurl }}">Return to {{ entity }} administration</a><p>
</form>
{% endblock %}
{% block nav %}
{% include 'nav.html' %}
{% endblock nav %}
