<html>
<head>
<title>Template Engine Interface</title>
<link rel="stylesheet" type="text/css" href="../media/style.css">
</head>
<body>

<table border="0" cellspacing="0" cellpadding="0" height="48" width="100%">
  <tr>
    <td class="header_top">Cgiapp2</td>
  </tr>
  <tr><td class="header_line"><img src="../media/empty.png" width="1" height="1" border="0" alt=""  /></td></tr>
  <tr>
    <td class="header_menu">
  		  [ <a href="../classtrees_Cgiapp2.html" class="menu">class tree: Cgiapp2</a> ]
		  [ <a href="../elementindex_Cgiapp2.html" class="menu">index: Cgiapp2</a> ]
		  [ <a href="../elementindex.html" class="menu">all elements</a> ]
    </td>
  </tr>
  <tr><td class="header_line"><img src="../media/empty.png" width="1" height="1" border="0" alt=""  /></td></tr>
</table>

<table width="100%" border="0" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="200" class="menu">
	<div id="ric">
					<p><a href="../ric_Changelog.html">Changelog</a></p>
					<p><a href="../ric_README.html">README</a></p>
			</div>
      <b>Packages:</b><br />
              <a href="../li_Cgiapp2.html">Cgiapp2</a><br />
            <br /><br />
		<b>Tutorials/Manuals:</b><br />
							<strong>Class-level:</strong>
							<ul>
	<li type="square"><a href="../Cgiapp2/tutorial_Cgiapp2.cls.html">Introduction</a>
<ul>
	<li type="square"><a href="../Cgiapp2/tutorial_Cgiapp21.cls.html">Usage Example</a>
</ul>
<ul>
	<li type="square"><a href="../Cgiapp2/tutorial_Cgiapp22.cls.html">Abstract</a>
</ul>
<ul>
	<li type="square"><a href="../Cgiapp2/tutorial_Cgiapp23.cls.html">Purpose and Conventions</a>
</ul>
<ul>
	<li type="square"><a href="../Cgiapp2/tutorial_Cgiapp24.cls.html">Callback Hook System</a>
</ul>
<ul>
	<li type="square"><a href="../Cgiapp2/tutorial_Cgiapp25.cls.html">Exception and Error Handling</a>
</ul>
<ul>
	<li type="square"><a href="../Cgiapp2/tutorial_Cgiapp26.cls.html">Types of Methods</a>
</ul>
<ul>
	<li type="square"><a href="../Cgiapp2/tutorial_Cgiapp27.cls.html">Template Engine Interface</a>
</ul>
<ul>
	<li type="square"><a href="../Cgiapp2/tutorial_Cgiapp28.cls.html">Migrating from Cgiapp to Cgiapp2</a>
</ul>
<ul>
	<li type="square"><a href="../Cgiapp2/tutorial_Cgiapp29.cls.html">Resources and Credits</a>
</ul>
</li></ul>

							                        <b>Files:</b><br />
      	  <div class="package">
			<a href="../Cgiapp2/_Cgiapp2_class_php.html">		Cgiapp2.class.php
		</a><br>
			<a href="../Cgiapp2/_Cgiapp2_Error_class_php.html">		Error.class.php
		</a><br>
			<a href="../Cgiapp2/_Cgiapp2_Exception_Error_class_php.html">		Error.class.php
		</a><br>
			<a href="../Cgiapp2/_Cgiapp2_Exception_class_php.html">		Exception.class.php
		</a><br>
			<a href="../Cgiapp2/_Cgiapp2_FrontController_class_php.html">		FrontController.class.php
		</a><br>
			<a href="../Cgiapp2/_Cgiapp2_Plugin_Template_Interface_class_php.html">		Interface.class.php
		</a><br>
			<a href="../Cgiapp2/_Cgiapp2_Error_Observer_Interface_class_php.html">		Interface.class.php
		</a><br>
			<a href="../Cgiapp2/_Cgiapp2_Exception_Observer_Interface_class_php.html">		Interface.class.php
		</a><br>
			<a href="../Cgiapp2/_Cgiapp2_Exception_Observer_Log_class_php.html">		Log.class.php
		</a><br>
			<a href="../Cgiapp2/_Cgiapp2_Error_Observer_Log_class_php.html">		Log.class.php
		</a><br>
			<a href="../Cgiapp2/_Cgiapp2_Exception_Observer_Mail_class_php.html">		Mail.class.php
		</a><br>
			<a href="../Cgiapp2/_Cgiapp2_Error_Observer_Mail_class_php.html">		Mail.class.php
		</a><br>
			<a href="../Cgiapp2/_Cgiapp2_Plugin_Savant2_class_php.html">		Savant2.class.php
		</a><br>
			<a href="../Cgiapp2/_Cgiapp2_Plugin_Savant3_class_php.html">		Savant3.class.php
		</a><br>
			<a href="../Cgiapp2/_Cgiapp2_Plugin_Smarty_class_php.html">		Smarty.class.php
		</a><br>
			<a href="../Cgiapp2/_Cgiapp2_Plugin_Xslt_class_php.html">		Xslt.class.php
		</a><br>
	  </div><br />
      
            <b>Classes:</b><br />
        <div class="package">
		    		<a href="../Cgiapp2/Cgiapp2.html">Cgiapp2</a><br />
	    		<a href="../Cgiapp2/Cgiapp2_Error.html">Cgiapp2_Error</a><br />
	    		<a href="../Cgiapp2/Cgiapp2_Error_Observer_Interface.html">Cgiapp2_Error_Observer_Interface</a><br />
	    		<a href="../Cgiapp2/Cgiapp2_Error_Observer_Log.html">Cgiapp2_Error_Observer_Log</a><br />
	    		<a href="../Cgiapp2/Cgiapp2_Error_Observer_Mail.html">Cgiapp2_Error_Observer_Mail</a><br />
	    		<a href="../Cgiapp2/Cgiapp2_Exception.html">Cgiapp2_Exception</a><br />
	    		<a href="../Cgiapp2/Cgiapp2_Exception_Error.html">Cgiapp2_Exception_Error</a><br />
	    		<a href="../Cgiapp2/Cgiapp2_Exception_Observer_Interface.html">Cgiapp2_Exception_Observer_Interface</a><br />
	    		<a href="../Cgiapp2/Cgiapp2_Exception_Observer_Log.html">Cgiapp2_Exception_Observer_Log</a><br />
	    		<a href="../Cgiapp2/Cgiapp2_Exception_Observer_Mail.html">Cgiapp2_Exception_Observer_Mail</a><br />
	    		<a href="../Cgiapp2/Cgiapp2_FrontController.html">Cgiapp2_FrontController</a><br />
	    		<a href="../Cgiapp2/Cgiapp2_Plugin_Savant2.html">Cgiapp2_Plugin_Savant2</a><br />
	    		<a href="../Cgiapp2/Cgiapp2_Plugin_Savant3.html">Cgiapp2_Plugin_Savant3</a><br />
	    		<a href="../Cgiapp2/Cgiapp2_Plugin_Smarty.html">Cgiapp2_Plugin_Smarty</a><br />
	    		<a href="../Cgiapp2/Cgiapp2_Plugin_Template_Interface.html">Cgiapp2_Plugin_Template_Interface</a><br />
	    		<a href="../Cgiapp2/Cgiapp2_Plugin_Xslt.html">Cgiapp2_Plugin_Xslt</a><br />
	  </div>
                </td>
    <td>
      <table cellpadding="10" cellspacing="0" width="100%" border="0"><tr><td valign="top">

<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td width="10%" align="left" valign="bottom"><a href=
"../Cgiapp2/tutorial_Cgiapp26.cls.html">Prev</a></td>
<td width="80%" align="center" valign="bottom"></td>
<td width="10%" align="right" valign="bottom"><a href=
"../Cgiapp2/tutorial_Cgiapp28.cls.html">Next</a></td>
</tr>
</table>
<div><a name=""></a><div class="ref-title-box">Template Engine Interface<h1 class="ref-title">Template Engine Interface</h1>
    <h2 class="ref-purpose">How to use template engines with Cgiapp2.</h2></div>

<span><a name=""></a><h2 class="title">Cgiapp2 Template Methods</h2><p>Cgiapp2 utilizes template engines via the Callback Hook System. There
        are three hooks for templates:</p>
    <ul><li>tmpl_path: Initialize a template engine and/or re/set the
        path to templates.</li>
        <li>tmpl_assign: Assign variables to the template
        engine.</li>
        <li>tmpl_fetch: Fetch the contents of a template, i.e., compile
        the template and return the contents.</li></ul>
    <p>If the template plugin you use implements each of these hooks, you may
        call all of these easily from within your code with these Cgiapp2
        methods:</p>
    <ul><li><a href="../Cgiapp2/Cgiapp2.html#methodtmpl_path">tmpl_path()</a>; most times, you
        will never need to call this, as it is called during application
        initialization. However, if at any point you want to change the path
        to templates from your application or another class, you would use
        this method.</li>
        <li><a href="../Cgiapp2/Cgiapp2.html#methodtmpl_assign">Cgiapp2::tmpl_assign()</a></li>
        <li><a href="../Cgiapp2/Cgiapp2.html#methodload_tmpl">Cgiapp2::load_tmpl()</a></li></ul></span>

<span><a name=""></a><h2 class="title">Template Plugin Classes</h2><p>Cgiapp2 ships with several template plugin classes:</p>
    <ul><li>Cgiapp_Plugin_Smarty: Smarty</li>
        <li>Cgiapp_Plugin_Savant2: Savant2</li>
        <li>Cgiapp_Plugin_Savant3: Savant3</li></ul>
    <p>If you wish to utilize another template engine, while still keeping
        the template agnostic interface Cgiapp2 provides, you can develop your
        own template plugin. To do so, implement the {@link
        Cgiapp2_Plugin_Template_Interface} class. In the class file, add the
        class to Cgiapp2's template hooks. As an example:</p>
    <div class="listing"><pre><ol><li><span class="src-php">&lt;?php</span></li>
<li><span class="src-inc">include_once </span><span class="src-str">'Cgiapp2/Plugin/Template/Interface'</span><span class="src-sym">;</span></li>
<li>&nbsp;</li>
<li><span class="src-key">class </span><span class="src-id">MyTemplateEngine </span><span class="src-key">implements </span><span class="src-id">Cgiapp2_Plugin_Template_Interface</span></li>
<li><span class="src-sym">{</span></li>
<li>    <span class="src-key">public </span><span class="src-key">static </span><span class="src-key">function </span><span class="src-id">init</span><span class="src-sym">(</span><span class="src-id">Cgiapp2 </span><span class="src-var">$cgiapp</span><span class="src-sym">, </span><span class="src-var">$tmpl_path</span><span class="src-sym">)</span></li>
<li>    <span class="src-sym">{</span></li>
<li>        <span class="src-comm">// Initialize template engine and/or change path to templates</span></li>
<li>    <span class="src-sym">}</span></li>
<li>&nbsp;</li>
<li>    <span class="src-key">public </span><span class="src-key">static </span><span class="src-key">function </span><span class="src-id">assign</span><span class="src-sym">(</span><span class="src-id">Cgiapp2 </span><span class="src-var">$cgiapp</span><span class="src-sym">)</span></li>
<li>    <span class="src-sym">{</span></li>
<li>        <span class="src-comm">// Assign variables to template</span></li>
<li>    <span class="src-sym">}</span></li>
<li>&nbsp;</li>
<li>    <span class="src-key">public </span><span class="src-key">static </span><span class="src-key">function </span><span class="src-id">fetch</span><span class="src-sym">(</span><span class="src-id">Cgiapp2 </span><span class="src-var">$cgiapp</span><span class="src-sym">, </span><span class="src-var">$tmpl_file</span><span class="src-sym">)</span></li>
<li>    <span class="src-sym">{</span></li>
<li>        <span class="src-comm">// Fetch a compiled template...</span></li>
<li>    <span class="src-sym">}</span></li>
<li><span class="src-sym">}</span></li>
<li>&nbsp;</li>
<li><span class="src-id"><a href="../Cgiapp2/Cgiapp2.html">Cgiapp2</a></span><span class="src-sym">::</span><a href="../Cgiapp2/Cgiapp2.html#methodadd_callback">add_callback</a><span class="src-sym">(</span><span class="src-str">'tmpl_path'</span><span class="src-sym">, </span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'MyTemplateEngine'</span><span class="src-sym">, </span><span class="src-str">'init'</span><span class="src-sym">))</span><span class="src-sym">;</span></li>
<li><span class="src-id"><a href="../Cgiapp2/Cgiapp2.html">Cgiapp2</a></span><span class="src-sym">::</span><a href="../Cgiapp2/Cgiapp2.html#methodadd_callback">add_callback</a><span class="src-sym">(</span><span class="src-str">'tmpl_assign'</span><span class="src-sym">, </span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'MyTemplateEngine'</span><span class="src-sym">, </span><span class="src-str">'init'</span><span class="src-sym">))</span><span class="src-sym">;</span></li>
<li><span class="src-id"><a href="../Cgiapp2/Cgiapp2.html">Cgiapp2</a></span><span class="src-sym">::</span><a href="../Cgiapp2/Cgiapp2.html#methodadd_callback">add_callback</a><span class="src-sym">(</span><span class="src-str">'tmpl_fetch'</span><span class="src-sym">, </span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'MyTemplateEngine'</span><span class="src-sym">, </span><span class="src-str">'init'</span><span class="src-sym">))</span><span class="src-sym">;</span></li>
<li><span class="src-php">?&gt;</span></li>
</ol></pre></div>
    <p>There are two efficient ways to implement the template engine:</p>
    <ul><li>Store an instance of the template engine as a Cgiapp2 param:
        <div class="listing"><pre><ol><li><span class="src-php">&lt;?php</span></li>
<li><span class="src-key">class </span><span class="src-id">MyTemplateEngine</span></li>
<li><span class="src-sym">{</span></li>
<li>    <span class="src-key">public </span><span class="src-var">$path</span><span class="src-sym">;</span></li>
<li>&nbsp;</li>
<li>    <span class="src-key">public </span><span class="src-key">function </span><span class="src-id">__construct</span><span class="src-sym">(</span><span class="src-var">$tmpl_path</span><span class="src-sym">)</span></li>
<li>    <span class="src-sym">{</span></li>
<li>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">path </span>= <span class="src-var">$tmpl_path</span><span class="src-sym">;</span></li>
<li>    <span class="src-sym">}</span></li>
<li>    </li>
<li>    <span class="src-key">public </span><span class="src-key">static </span><span class="src-key">function </span><span class="src-id">init</span><span class="src-sym">(</span><span class="src-id">Cgiapp2 </span><span class="src-var">$cgiapp</span><span class="src-sym">, </span><span class="src-var">$tmpl_path</span><span class="src-sym">)</span></li>
<li>    <span class="src-sym">{</span></li>
<li>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-var">$cgiapp</span><span class="src-sym">-&gt;</span><span class="src-id">param</span><span class="src-sym">(</span><span class="src-str">'MyTemplateEngine_Instance'</span><span class="src-sym">)) </span><span class="src-sym">{</span></li>
<li>            <span class="src-var">$tmpl_engine </span>= <span class="src-key">new </span><span class="src-id">MyTemplateEngine</span><span class="src-sym">(</span><span class="src-var">$tmpl_path</span><span class="src-sym">)</span></li>
<li>        <span class="src-sym">} </span><span class="src-key">else </span><span class="src-sym">{</span></li>
<li>            <span class="src-var">$tmpl_engine </span>= <span class="src-var">$cgiapp</span><span class="src-sym">-&gt;</span><span class="src-id">param</span><span class="src-sym">(</span><span class="src-str">'MyTemplateEngine_Instance'</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li>            <span class="src-var">$tmpl_engine</span><span class="src-sym">-&gt;</span><span class="src-id">path </span>= <span class="src-var">$tmpl_path</span><span class="src-sym">;</span></li>
<li>        <span class="src-sym">}</span></li>
<li>    </li>
<li>        <span class="src-key">return </span><span class="src-id">true</span><span class="src-sym">;</span></li>
<li>    <span class="src-sym">}</span></li>
<li><span class="src-sym">}</span></li>
<li><span class="src-php">?&gt;</span></li>
</ol></pre></div></li>
        <li>Implement a Singleton pattern in the plugin:
        <div class="listing"><pre><ol><li><span class="src-php">&lt;?php</span></li>
<li><span class="src-key">class </span><span class="src-id">MyTemplateEngine</span></li>
<li><span class="src-sym">{</span></li>
<li>    <span class="src-key">private </span><span class="src-key">static </span><span class="src-var">$_instance </span>= <span class="src-id">false</span><span class="src-sym">;</span></li>
<li>&nbsp;</li>
<li>    <span class="src-key">public </span><span class="src-var">$path</span><span class="src-sym">;</span></li>
<li>    </li>
<li>    <span class="src-key">private </span><span class="src-key">function </span><span class="src-id">__construct</span><span class="src-sym">(</span><span class="src-sym">)</span></li>
<li>    <span class="src-sym">{</span></li>
<li>    <span class="src-sym">}</span></li>
<li>&nbsp;</li>
<li>    <span class="src-key">public </span><span class="src-key">static </span><span class="src-key">function </span><span class="src-id">getInstance</span><span class="src-sym">(</span><span class="src-sym">)</span></li>
<li>    <span class="src-sym">{</span></li>
<li>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-id">self</span><span class="src-sym">::</span><span class="src-var">$_instance</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li>            <span class="src-id">self</span><span class="src-sym">::</span><span class="src-var">$_instance </span>= <span class="src-key">new </span><span class="src-id">MyTemplateEngine</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li>        <span class="src-sym">}</span></li>
<li>    </li>
<li>        <span class="src-key">return </span><span class="src-id">self</span><span class="src-sym">::</span><span class="src-var">$_instance</span><span class="src-sym">;</span></li>
<li>    <span class="src-sym">}</span></li>
<li>    </li>
<li>    <span class="src-key">public </span><span class="src-key">static </span><span class="src-key">function </span><span class="src-id">init</span><span class="src-sym">(</span><span class="src-id">Cgiapp2 </span><span class="src-var">$cgiapp</span><span class="src-sym">, </span><span class="src-var">$tmpl_path</span><span class="src-sym">)</span></li>
<li>    <span class="src-sym">{</span></li>
<li>        <span class="src-id">self</span><span class="src-sym">::</span><span class="src-id">getInstance</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">-&gt;</span><span class="src-id">path </span>= <span class="src-var">$tmpl_path</span><span class="src-sym">;</span></li>
<li>    <span class="src-sym">}</span></li>
<li><span class="src-sym">}</span></li>
<li><span class="src-php">?&gt;</span></li>
</ol></pre></div></li></ul>
    <p>For examples, see the template engine plugins distributed with Cgiapp2
        as noted above.</p></span></div>
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td width="33%" align="left" valign="top"><a href="../Cgiapp2/tutorial_Cgiapp26.cls.html">Prev</a></td>
<td width="34%" align="center" valign="top"><a href=
"../Cgiapp2/tutorial_Cgiapp2.cls.html">Up</a></td>
<td width="33%" align="right" valign="top"><a href=
"../Cgiapp2/tutorial_Cgiapp28.cls.html">Next</a></td>
</tr>

<tr>
<td width="33%" align="left" valign="top">Types of Methods</td>
<td width="34%" align="center" valign="top">Introduction</td>
<td width="33%" align="right" valign="top">Migrating from Cgiapp to Cgiapp2</td>
</tr>
</table>
        <div class="credit">
		    <hr />
		    Documentation generated on Sat, 03 Jun 2006 10:48:32 -0400 by <a href="http://www.phpdoc.org">phpDocumentor 1.3.0RC5</a>
	      </div>
      </td></tr></table>
    </td>
  </tr>
</table>

</body>
</html>